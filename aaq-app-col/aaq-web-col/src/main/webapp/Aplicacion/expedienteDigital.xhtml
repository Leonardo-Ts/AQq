<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" template="/Comun/plantilla.xhtml">
	<ui:param name="componente" value="#{beanExpedienteDigitalUnificado}" />

	<ui:define name="tituloPagina">
		<h:outputText value="AQ Aplicaciones - Expediente Digital" />
		<ui:param name="clase_pagina" value="aplicacion" />
	</ui:define>
	<ui:define name="navegacionDeFlechas">
		<li><a href="inicio.siica">AQ Aplicaciones</a></li>
		<li><h:outputText value="Expediente Digital" /></li>
	</ui:define>

	<ui:define name="cuerpoPagina">

		<ui:decorate template="/Comun/comunFiltroSimple.xhtml">
			<ui:param name="componente" value="#{beanExpedienteDigitalUnificado}" />
			<ui:param name="mostrarFiltroFecha" value="true" />
			<ui:param name="mostrarFiltroComboEstado" value="true" />
			<ui:param name="mostrarFiltroComboBase" value="true" />
			<ui:param name="mostrarFiltroComboTerminal" value="true" />
			<ui:param name="mostrarTxtNumeroReporte" value="true" />
			<ui:param name="mostrarEtiquetaNumeroReporte" value="true" />
			<ui:param name="mostrarBotonReporteGraficaED" value="true" />
			<ui:define name="contenidoAdicional">
				<p:outputLabel for="txtFiltroNombreF" value="Nombre de Formato:" />
	             <h:selectOneMenu id="txtFiltroNombreF" value="#{componente._filtroNombreF}">
	             		<f:selectItem itemLabel="-- Todos  --" itemValue="todos"/> 
	                   <f:selectItem itemLabel="Formato Reclamación Pendiente" itemValue="Formato Reclamación Pendiente"/> 
						<f:selectItem itemLabel="Formato Encuesta Servicio" itemValue="Formato Encuesta Servicio"/> 
						<f:selectItem itemLabel="Formato Asistencia Víal" itemValue="Formato Asistencia Víal"/> 
						<f:selectItem itemLabel="Formato Nuevos Vehículos" itemValue="Formato Nuevos Vehículos"/> 
						<f:selectItem itemLabel="Formato Pase Médico" itemValue="Formato Pase Médico"/> 
						<f:selectItem itemLabel="Formato Asignación Abogado" itemValue="Formato Asignación Abogado"/> 
						<f:selectItem itemLabel="Formato Admisión Autos" itemValue="Formato Admisión Autos"/> 
						<f:selectItem itemLabel="Formato Admisión Motocicletas" itemValue="Formato Admisión Motocicletas"/> 
						<f:selectItem itemLabel="Formato Garantía Prendaria" itemValue="Formato Garantía Prendaria"/> 
						<f:selectItem itemLabel="Formato Reparación Bienes" itemValue="Formato Reparación Bienes"/> 
						<f:selectItem itemLabel="Formato Vale Ambulancia" itemValue="Formato Vale Ambulancia"/> 
						<f:selectItem itemLabel="Formato Orden Servicio" itemValue="Formato Orden Servicio"/> 
						<f:selectItem itemLabel="Formato Inspección Pesado" itemValue="Formato Inspección Pesado"/> 
						<f:selectItem itemLabel="Formato Inspección Motocicletas" itemValue="Formato Inspección Motocicletas"/> 
						<f:selectItem itemLabel="Formato Admisión Pesado" itemValue="Formato Admisión Pesado"/> 
						<f:selectItem itemLabel="Formato Inventario Automóviles" itemValue="Formato Inventario Automóviles"/> 
						<f:selectItem itemLabel="Formato Cuestionario Robo" itemValue="Formato Cuestionario Robo"/> 
						<f:selectItem itemLabel="Formato Declaración Universal" itemValue="Formato Declaración Universal"/> 
						<f:selectItem itemLabel="Formato Recibo Ingreso por Siniestro" itemValue="Formato Recibo Ingreso por Siniestro"/> 
						<f:selectItem itemLabel="Formato Recibo Pago Deducible" itemValue="Formato Recibo Pago Deducible"/> 
						<f:selectItem itemLabel="Formato Solicitud Diagnóstico" itemValue="Formato Solicitud Diagnóstico"/> 
						<f:selectItem itemLabel="Formato Memoria Descriptiva" itemValue="Formato Memoria Descriptiva"/> 
						<f:selectItem itemLabel="Formato Cargo Tarjeta Crédito" itemValue="Formato Cargo Tarjeta Crédito"/> 
						<f:selectItem itemLabel="Formato Responsabilidad Civil" itemValue="Formato Responsabilidad Civil"/> 
						<f:selectItem itemLabel="Formato Reparación Bienes Diversos" itemValue="Formato Reparación Bienes Diversos"/>
						<f:selectItem itemLabel="Formato Observaciones Asegurado" itemValue="Formato Observaciones Asegurado"/>
						<f:selectItem itemLabel="Formato Inventario Único Pesado" itemValue="Formato Inventario Único Pesado"/>
						<f:selectItem itemLabel="Formato Reclamación sin comprobante de peaje" itemValue="Formato Reclamación sin comprobante de peaje"/>
	                </h:selectOneMenu>
               </ui:define>	
		</ui:decorate> 
		
		
		<div class="forma_completa"  >
			<h:form id="forma_panel_contador"   >
			
					<p:panel styleClass="panel_verde_tiempos" >	
							<h:outputLabel  id="conta1" styleClass="numero_blanco"
							value="#{componente.txtExitoCorreoPorc}" />
							<br/>
							<h:outputLabel styleClass="texto_blanco" value="#{componente.txtExitoCorreo}" />
							<br/>
							<p:commandButton id="cont1" value="Enviados vía correo"  styleClass="bVerde" 
							action="#{componente.actualizarListadoNuevo}" actionListener="#{componente.cambiarValoresEmail()}"
							update=":forma_tabla_nueva:tabla_nueva"
							/>
					</p:panel>
					
					<p:panel styleClass="panel_morado_tiempos" >	
							<h:outputLabel id="conta2" styleClass="numero_blanco"
								value="#{componente.txtErrorCorreoPorc}" />
							<br/>
							<h:outputLabel styleClass="texto_blanco" value="#{componente.txtErrorCorreo}" />
							<br/>
 							<p:commandButton id="cont2" value="No Enviados vía correo"  styleClass="bMorado"
							action="#{componente.actualizarListadoNuevo}" actionListener="#{componente.cambiarValoresErrorEmail()}"
							update=":forma_tabla_nueva:tabla_nueva" />
					</p:panel>
					
					<p:panel styleClass="panel_verde_tiempos">	
							<h:outputLabel id="conta3" styleClass="numero_blanco"
								value="#{componente.txtExitoSFTPPorc}" />
							<br/>
							<h:outputLabel styleClass="texto_blanco" value="#{componente.txtExitoSFTP}" />
							<br/>
							<p:commandButton id="cont3" value="Enviados QContent"  styleClass="bVerde" 
							action="#{componente.actualizarListadoNuevo}" actionListener="#{componente.cambiarValoresSftp()}"
							update=":forma_tabla_nueva:tabla_nueva" />
					</p:panel>
					
					<p:panel styleClass="panel_morado_tiempos">	
							<h:outputLabel id="conta4" styleClass="numero_blanco"
								value="#{componente.txtErrorSFTPPorc}"/>
							<br/> 
							<h:outputLabel styleClass="texto_blanco" value="#{componente.txtErrorSFTP}" />
							<br/> 
							<p:commandButton id="cont4" value="No Enviados vía QContent"  styleClass="bMorado"
							action="#{componente.actualizarListadoNuevo}" actionListener="#{componente.cambiarValoresErrorSftp()}"
							update=":forma_tabla_nueva:tabla_nueva" />
					</p:panel>
					
					<p:panel styleClass="panel_verde_small">	
							<h:outputLabel styleClass="texto_blanco" value="Reportes con E. D. → #{componente.txtReportesDocs}" />
							<br/>
							<h:outputLabel id="contaT" styleClass="numero_blanco" value="#{componente.txtTotalCont}"/>
							<br/>
							<p:commandButton id="totalDocsDescargar" value="Documentos Generados"  styleClass="bVerde"
							oncomplete="PF('panelDescarga').show()" update=":formaDescarga:contenidoDescarga"/>
					</p:panel>
			</h:form>
		</div>
		
		<ui:decorate template="/Comun/comunGraficas2.xhtml">
			<ui:param name="componente" value="#{beanExpedienteDigitalUnificado}" />
		</ui:decorate>

		
		
		<ui:decorate template="/Comun/comunTablaSimple.xhtml">
			<ui:param name="componente" value="#{beanExpedienteDigitalUnificado}" />
			<ui:param name="listaObjetos" value="#{componente.listado}" />
			<ui:param name="listaColumnas" value="#{componente.columnas}" />
			<ui:param name="listaDe" value="Expedientes Digitales No Enviados" />
			<ui:define name="contenidoAdicional">
			
				<p:column headerText="Entrega SFTP" style="text-align:center" >
				<p:commandLink disabled="#{objeto.sftp}" oncomplete="PF('panelDetallesSftp').show()" 
	                    update=":formaDetallesSftp:contenidoInfoSftp" 
	                    actionListener="#{beanExpedienteDigitalUnificado.doAccionVerError}"  >
	                  <f:param value="#{objeto.id}" name="id"/>
	                  <h:graphicImage value="#{objeto.sftp ? '/diseno/imagenes/aplicativo/bien.png': '/diseno/imagenes/aplicativo/error.png'}" />
	              </p:commandLink>
				</p:column>
			
				<p:column headerText="Entrega Correo" style="text-align:center" >
				 <p:commandLink disabled="#{objeto.correo}" oncomplete="PF('panelDetallesMail').show()" 
	                    update=":formaCorreo:contenidoCorreo"
	                   actionListener="#{beanExpedienteDigitalUnificado.doAccionVerError}" >
	                  <f:param value="#{objeto.id}" name="id"/>
	                  <h:graphicImage value="#{objeto.correo ? '/diseno/imagenes/aplicativo/bien.png': '/diseno/imagenes/aplicativo/error.png'}" />
	              </p:commandLink>
				</p:column>
				
				
				<p:column headerText="Descargar" style="text-align:center" >
					<h:commandLink id="ExportPDF" title="Descargar PDF" 
					action="#{componente.doAccionDescargaPDF}">
					<f:param name="id" value="#{riv}"/>
					<h:graphicImage url="#{!objeto.sftp or !objeto.correo ? '/diseno/imagenes/aplicativo/download.png' : '/diseno/imagenes/aplicativo/noDownload.png'}" alt="PDF"/>
					</h:commandLink>
				</p:column>
				
			</ui:define>
			
		</ui:decorate>
		
		<p:dialog   closeOnEscape="true" closable="true" widgetVar="panelDetallesSftp" 
                  header="Información:">
            <h:form id="formaDetallesSftp">
                <p:outputPanel id="contenidoInfoSftp">                    
                        <h:panelGrid columns="2" styleClass="tabla_captura"
                        			 columnClasses = "cuarto,tres_cuartos" style="width:250px">
                        	<h:outputText id="sftpInfo" value="#{beanExpedienteDigitalUnificado.objetoActua.mensajeSftp}"/>
						</h:panelGrid> 
						
                </p:outputPanel>
            </h:form>
      </p:dialog>
      
      <p:dialog closeOnEscape="true" closable="true" widgetVar="panelDetallesMail" 
                  header="Detalles:" >
            <h:form id="formaCorreo">
                <p:outputPanel id="contenidoCorreo">                    
                        <h:panelGrid columns="2" styleClass="tabla_captura" columnClasses = "mitad,mitad" style="width:450px" >
                        	<h:outputText id="mailInfo" value="MENSAJE: #{beanExpedienteDigitalUnificado.objetoActua.mensajeMail}"/>
						</h:panelGrid> 
						
						<hr style="height:2px;border-width:0;color:#91278F;background-color:#91278F"> </hr>
						
						 <h:panelGrid columns="2" styleClass="tabla_captura"  columnClasses = "mitad,mitad" style="width:450px">
                        	<p:outputLabel id="correoOriginal" value="Correo Registrado: #{beanExpedienteDigitalUnificado.objetoActua.correoDestinatario}" />
                        </h:panelGrid>
                        
                        <hr style="height:2px;border-width:0;color:#91278F;background-color:#91278F"> </hr>
                        
                        <h:panelGrid columns="1"  columnClasses = "mitad,mitad" style="width:450px" styleClass="tabla_captura">
								
								<p:outputLabel style="font-weight:bold;font-size: 14px" value="Si desea reintentar enviar el formato vía correo ingrese los siguientes datos:" />
								<br/>
								<p:outputLabel value="Correo Electrónico:"/>
								<p:inputText autocomplete="off"  placeholder="Si este campo esta vacío ingrese correo destinatario" value="#{beanExpedienteDigitalUnificado.correoDestino}" >
								</p:inputText>
								
							</h:panelGrid>
                        	<h:panelGrid columns="2"  columnClasses = "mitad,mitad" style="width:350px" styleClass="tabla_captura">
							<p:commandLink 
								actionListener="#{componente.doAccionRegresar}" oncomplete="PF('panelDetallesMail').hide();" title="Regresar">
								<h:graphicImage alt="Regresar"
									value="/diseno/imagenes/aplicativo/return2.png" />
							</p:commandLink>
							<p:commandLink 
								actionListener="#{componente.doAccionEnviarFormato}"  oncomplete="PF('panelDetallesMail').hide();" title="Enviar correo.">
								<h:graphicImage alt="Enviar"
									value="/diseno/imagenes/aplicativo/enviar.png" />
								<f:param value="#{objeto.id}" name="id"/>
								<p:confirm header="Confirmación de envío."
									message="Por favor confirme que desea reintentar el envío del formato."
									icon="ui-icon-alert" />
							</p:commandLink>
							<p:confirmDialog global="true" header="Confirmación de envio" showEffect="fade" hideEffect="fade" >
								<p:commandButton value="Si" type="button"  styleClass="ui-confirmdialog-yes"
									icon="ui-icon-check" oncomplete="PF('panelDetallesMail').hide();" >
									<f:param value="#{objeto.id}" name="id"/> 
								</p:commandButton>
								<p:commandButton value="No" type="button"
									tyleClass="ui-confirmdialog-no ui-button-flat" icon="ui-icon-close" oncomplete="PF('panelDetallesMail').hide();" />
							</p:confirmDialog>
						</h:panelGrid> 

						
                </p:outputPanel>
            </h:form>
      </p:dialog>
      
       <p:dialog closeOnEscape="true" closable="true" widgetVar="panelDescarga" 
                  header="Descargar EXCEL" >
            <h:form id="formaDescarga">
                <p:outputPanel id="contenidoDescarga">                    
                        <h:panelGrid columns="2" styleClass="tabla_captura"
                        			 columnClasses = "mitad,mitad" style="width:450px">
                        	<h:outputText id="descargarDoc" value="Seleccione el documento a descargar."/>
                        	<h:selectOneMenu value="#{componente.docDescargar}" >
						       	<f:selectItem itemLabel="Seleccionar una opción." itemValue="#{null}" noSelectionOption="true"/>
						        <f:selectItem itemValue="listadoErrores" itemLabel="Doc. Listado de Documentos No Enviados." />
						        <f:selectItem itemValue="listadoMetrica" itemLabel="Doc. Listado de Metrica de Documetos/Reportes." />
						    </h:selectOneMenu>
						</h:panelGrid> 
						<h:panelGrid columns="2" columnClasses="mitad,mitad"
						styleClass="tabla_captura">
							<p:commandButton value="Descargar" ajax="false"
								actionListener="#{beanExpedienteDigitalUnificado.valueDescargar}"
								oncomplete="PF('panelDescarga').hide();"/>
								
							<p:commandButton value="Cerrar" ajax="false"  
								oncomplete="PF('panelDescarga').hide();" />
						</h:panelGrid>  
						
                </p:outputPanel>
            </h:form>
      </p:dialog>
      
		
	</ui:define>
</ui:composition>
